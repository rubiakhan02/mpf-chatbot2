(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,91741,e=>{e.v({accent:"Chatbot-module__TlBrQq__accent",avatar:"Chatbot-module__TlBrQq__avatar",botMessage:"Chatbot-module__TlBrQq__botMessage",bounce:"Chatbot-module__TlBrQq__bounce",chatOptions:"Chatbot-module__TlBrQq__chatOptions",chatbotContainer:"Chatbot-module__TlBrQq__chatbotContainer",closeBtn:"Chatbot-module__TlBrQq__closeBtn",container:"Chatbot-module__TlBrQq__container",customForm:"Chatbot-module__TlBrQq__customForm",dot:"Chatbot-module__TlBrQq__dot",fadeIn:"Chatbot-module__TlBrQq__fadeIn",formError:"Chatbot-module__TlBrQq__formError",formInput:"Chatbot-module__TlBrQq__formInput",formSuccess:"Chatbot-module__TlBrQq__formSuccess",formTitle:"Chatbot-module__TlBrQq__formTitle",header:"Chatbot-module__TlBrQq__header",headerInfo:"Chatbot-module__TlBrQq__headerInfo",hidden:"Chatbot-module__TlBrQq__hidden",inputArea:"Chatbot-module__TlBrQq__inputArea",launcher:"Chatbot-module__TlBrQq__launcher",message:"Chatbot-module__TlBrQq__message",messages:"Chatbot-module__TlBrQq__messages",optionBtn:"Chatbot-module__TlBrQq__optionBtn",pBuilder:"Chatbot-module__TlBrQq__pBuilder",pCardContent:"Chatbot-module__TlBrQq__pCardContent",pCta:"Chatbot-module__TlBrQq__pCta",pDetails:"Chatbot-module__TlBrQq__pDetails",pEnquire:"Chatbot-module__TlBrQq__pEnquire",pLoc:"Chatbot-module__TlBrQq__pLoc",pPrice:"Chatbot-module__TlBrQq__pPrice",pStatus:"Chatbot-module__TlBrQq__pStatus",primary:"Chatbot-module__TlBrQq__primary",projectCard:"Chatbot-module__TlBrQq__projectCard",projectSlider:"Chatbot-module__TlBrQq__projectSlider",scrollArrow:"Chatbot-module__TlBrQq__scrollArrow",sendBtn:"Chatbot-module__TlBrQq__sendBtn",sliderWrapper:"Chatbot-module__TlBrQq__sliderWrapper",status:"Chatbot-module__TlBrQq__status",submitBtn:"Chatbot-module__TlBrQq__submitBtn",typing:"Chatbot-module__TlBrQq__typing",userInput:"Chatbot-module__TlBrQq__userInput",userMessage:"Chatbot-module__TlBrQq__userMessage",visible:"Chatbot-module__TlBrQq__visible"})},95602,e=>{"use strict";var t=e.i(43476),a=e.i(71645),o=e.i(91741);function s(){let[e,s]=(0,a.useState)(!1),[n,i]=(0,a.useState)([]),[d,u]=(0,a.useState)(""),[c,p]=(0,a.useState)(!1),[m,h]=(0,a.useState)(""),[_,f]=(0,a.useState)([]),[b,C]=(0,a.useState)(!0),[x,j]=(0,a.useState)("Please select an option"),g=(0,a.useRef)(null);(0,a.useEffect)(()=>{h(Math.random().toString(36).substring(2)+Date.now().toString(36)),i([{id:"initial",type:"bot",text:"Hi ðŸ‘‹\nWelcome to My Property Fact!\n\nReady to find the perfect property? ðŸ¡âœ¨\n\nPlease select your property type to get started.",options:["Commercial","Residential","New Launch"]}])},[]),(0,a.useEffect)(()=>{g.current&&g.current.scrollIntoView({behavior:"smooth"})},[n,c]);let y=()=>s(!e),B=(e,t,a=[],o=[],s=null)=>{let l={id:Date.now(),type:t,text:e,options:a,projectCards:o,followUp:s};i(e=>[...e,l]),f(a=>[...a,{sender:t,message:e}])},v=async(e=null)=>{let t=e||d.trim();if(t){if(["restart","reset"].includes(t.toLowerCase())){h(Math.random().toString(36).substring(2)+Date.now().toString(36)),i([{id:Date.now(),type:"bot",text:"Hi ðŸ‘‹\nWelcome to My Property Fact!\n\nReady to find the perfect property? ðŸ¡âœ¨\n\nPlease select your property type to get started.",options:["Commercial","Residential","New Launch"]}]),f([]),u(""),C(!0),j("Please select an option");return}B(t,"user"),u(""),C(!1),j("Type a message..."),p(!0);try{n[n.length-1]?.text?.toLowerCase().includes("which city"),t.toLowerCase();let e=await fetch("/api/chat",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({sessionId:m,message:t})}),a=await e.json();p(!1),a.redirectUrl?(a.reply&&B(a.reply,"bot"),setTimeout(()=>{window.location.href=a.redirectUrl},1500)):a.reply&&B(a.reply,"bot",a.options||[],a.projectCards||[],a.followUp),a.options&&a.options.length>0?(C(!0),j("Please select an option")):(C(!1),j("Type a message..."))}catch(e){console.error(e),p(!1),B("Error connecting to server.","bot")}}},w=(e,t,a)=>{i(o=>[...o,{id:Date.now(),type:"bot",text:e,followUp:t,options:a}]),C(!0),j("Please select an option")};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("button",{className:o.default.launcher,onClick:y,"aria-label":"Open Chatbot",children:(0,t.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"28",height:"28",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:(0,t.jsx)("path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2-2z"})})}),(0,t.jsxs)("div",{className:`${o.default.container} ${!e?o.default.hidden:""}`,children:[(0,t.jsxs)("div",{className:o.default.header,children:[(0,t.jsxs)("div",{className:o.default.headerInfo,children:[(0,t.jsx)("div",{className:o.default.avatar,children:(0,t.jsx)("img",{src:"/logo.png",alt:"MPF Logo",style:{width:"100%",height:"100%",objectFit:"contain"}})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{children:"MyPropertyFact"}),(0,t.jsx)("span",{className:o.default.status,children:"Online"})]})]}),(0,t.jsx)("button",{className:o.default.closeBtn,onClick:y,"aria-label":"Close Chatbot",children:(0,t.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,t.jsx)("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),(0,t.jsx)("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]}),(0,t.jsxs)("div",{className:o.default.messages,children:[n.map(e=>(0,t.jsxs)(a.default.Fragment,{children:[(0,t.jsx)("div",{className:`${o.default.message} ${"user"===e.type?o.default.userMessage:o.default.botMessage}`,children:e.text.split("\n").map((e,a)=>(0,t.jsx)("div",{children:e},a))}),e.projectCards&&e.projectCards.length>0&&(0,t.jsx)(l,{cards:e.projectCards,followUp:e.followUp||"Would you like to see more projects?",options:e.options,onOptionClick:e=>{e.toLowerCase();v(e)},onEnquire:e=>{i(t=>[...t,{id:"form-"+Date.now(),type:"form",projectName:e}])}}),e.followUp&&(!e.projectCards||0===e.projectCards.length)&&(0,t.jsx)("div",{className:`${o.default.message} ${o.default.botMessage}`,children:e.followUp}),"form"===e.type&&(0,t.jsx)(r,{projectName:e.projectName,sessionId:m,onSuccess:w}),e.options&&e.options.length>0&&(!e.projectCards||0===e.projectCards.length)&&(0,t.jsx)("div",{className:o.default.chatOptions,children:e.options.map((e,a)=>(0,t.jsx)("button",{className:o.default.optionBtn,onClick:()=>v(e),children:e},a))})]},e.id)),c&&(0,t.jsxs)("div",{className:o.default.typing,children:[(0,t.jsx)("span",{className:o.default.dot}),(0,t.jsx)("span",{className:o.default.dot}),(0,t.jsx)("span",{className:o.default.dot})]}),(0,t.jsx)("div",{ref:g})]}),(0,t.jsxs)("div",{className:o.default.inputArea,children:[(0,t.jsx)("input",{type:"text",className:o.default.userInput,placeholder:x,value:d,disabled:b,onChange:e=>u(e.target.value),onKeyPress:e=>"Enter"===e.key&&v()}),(0,t.jsx)("button",{className:o.default.sendBtn,onClick:()=>v(),disabled:b||!d.trim(),children:(0,t.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,t.jsx)("line",{x1:"22",y1:"2",x2:"11",y2:"13"}),(0,t.jsx)("polygon",{points:"22 2 15 22 11 13 2 9 22 2"})]})})]})]})]})}function l({cards:e,onEnquire:s,followUp:l,options:r,onOptionClick:n}){let i=(0,a.useRef)(null),[d,u]=(0,a.useState)(!1),c=()=>{if(!i.current)return;let{scrollLeft:e,scrollWidth:t,clientWidth:a}=i.current;u(e<t-a-5)};return(0,a.useEffect)(()=>(c(),window.addEventListener("resize",c),()=>window.removeEventListener("resize",c)),[e]),(0,t.jsxs)("div",{className:o.default.sliderWrapper,children:[(0,t.jsx)("div",{className:o.default.projectSlider,ref:i,onScroll:c,children:e.map((e,a)=>(0,t.jsxs)("div",{className:o.default.projectCard,children:[(0,t.jsx)("img",{src:e.image,alt:e.name,onError:e=>e.target.src="https://via.placeholder.com/300x200?text=No+Image"}),(0,t.jsxs)("div",{className:o.default.pCardContent,children:[(0,t.jsx)("h4",{children:e.name}),(0,t.jsxs)("p",{className:o.default.pLoc,children:["ðŸ“ ",e.location]}),(0,t.jsxs)("div",{className:o.default.pDetails,children:[(0,t.jsx)("span",{className:o.default.pPrice,children:e.price}),(0,t.jsx)("span",{className:o.default.pStatus,children:e.status})]}),(0,t.jsxs)("p",{className:o.default.pBuilder,children:["By ",e.builder]}),(0,t.jsx)("button",{className:o.default.pCta,onClick:()=>window.open(e.link,"_blank"),children:"View Details"}),(0,t.jsx)("button",{className:o.default.pEnquire,onClick:()=>s(e.name),children:"Enquire"})]})]},a))}),(0,t.jsx)("button",{className:`${o.default.scrollArrow} ${d?o.default.visible:""}`,onClick:()=>{i.current.scrollBy({left:300,behavior:"smooth"})},children:"â†’"}),(l||e&&e.length>0)&&(0,t.jsx)("div",{className:`${o.default.message} ${o.default.botMessage}`,style:{marginTop:"16px",marginLeft:"0",alignSelf:"flex-start",display:"inline-block",width:"auto",boxShadow:"0 2px 4px rgba(0,0,0,0.05)",backgroundColor:"#ffffff",padding:"10px 14px",borderRadius:"12px",fontSize:"0.95rem"},children:l||"Would you like to see more projects?"}),r&&r.length>0&&(0,t.jsx)("div",{className:o.default.chatOptions,style:{marginLeft:"0",marginTop:"8px",display:"flex"},children:r.map((e,a)=>(0,t.jsx)("button",{className:o.default.optionBtn,onClick:()=>n(e),children:e},a))})]})}function r({projectName:e,sessionId:s,onSuccess:l}){let[r,n]=(0,a.useState)(""),[i,d]=(0,a.useState)(""),[u,c]=(0,a.useState)(""),[p,m]=(0,a.useState)(""),[h,_]=(0,a.useState)(!1),[f,b]=(0,a.useState)(!1),C=async()=>{if(!r||r.length<3)return void m("Name must be at least 3 characters.");if(!/^[6-9]\d{9}$/.test(i))return void m("Please enter a valid 10-digit mobile number.");if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(u))return void m("Please enter a valid email address.");m(""),_(!0);try{let t=await fetch("/api/enquiry",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({sessionId:s,name:r,mobile:i,email:u,project:e})}),a=await t.json();a.success?(b(!0),l(a.reply,a.followUp,a.options)):(m(a.message||"Submission failed."),_(!1))}catch(e){console.error(e),m("Connection error."),_(!1)}};return f?(0,t.jsx)("div",{className:o.default.customForm,children:(0,t.jsx)("div",{className:o.default.formSuccess,children:"Thank you for sharing your details. Our consultant will contact you within 24 hours."})}):(0,t.jsxs)("div",{className:o.default.customForm,children:[(0,t.jsxs)("div",{className:o.default.formTitle,children:["Please share your details for",(0,t.jsx)("br",{}),(0,t.jsx)("strong",{children:e})]}),(0,t.jsx)("input",{type:"text",className:o.default.formInput,placeholder:"Full Name *",value:r,onChange:e=>n(e.target.value)}),(0,t.jsx)("input",{type:"tel",className:o.default.formInput,placeholder:"Mobile Number (10 digits) *",maxLength:"10",value:i,onChange:e=>d(e.target.value)}),(0,t.jsx)("input",{type:"email",className:o.default.formInput,placeholder:"Email ID *",value:u,onChange:e=>c(e.target.value)}),(0,t.jsx)("button",{className:o.default.submitBtn,onClick:C,disabled:h,children:h?"Submitting... â³":"Submit"}),p&&(0,t.jsx)("div",{className:o.default.formError,children:p})]})}e.s(["default",()=>s])}]);